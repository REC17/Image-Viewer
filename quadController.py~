from PyQt4.QtCore import *
from PyQt4.QtGui import *

class QuadController():
    def __init__(self, mainWin, parent = None):
        self.mainWin = mainWin
        self.zoom = "+"
        self.enableQuadMag = False

        self.xedit2 = self.mainWin.xedit2
        self.yedit2 = self.mainWin.yedit2

        self.compositeview1 = self.mainWin.graphicsView_2
        self.compositescene1 = QGraphicsScene()
        self.compositeview1.setScene(self.compositescene1)

        self.compositeview2 = self.mainWin.graphicsView_3
        self.compositescene2 = QGraphicsScene()
        self.compositeview2.setScene(self.compositescene2)

        self.compositeview3 = self.mainWin.graphicsView_4
        self.compositescene3 = QGraphicsScene()
        self.compositeview3.setScene(self.compositescene3)

        self.compositeview4 = self.mainWin.graphicsView_5
        self.compositescene4 = QGraphicsScene()
        self.compositeview4.setScene(self.compositescene4)

    def createConnections(self):
        self.mainWin.DotOn.pressed.connect(self.dotOn)
        self.mainWin.keyPressEvent = self.keyPressed
        self.mainWin.keyReleaseEvent = self.keyReleased
        self.mainWin.MagnifyPushButton.pressed.connect(self.magnifyPB)
        self.mainWin.SearchButton2.pressed.connect(self.searchPB)
        

    def dotOn(self):
        print "dot on"

    def magnifyPB(self):
        if self.enableQuadMag == False:
            self.mainWin.MagnifyPushButton.setText("Turn Off Magnifying Glass")
            self.enableQuadMag = True
            return
        if self.enableQuadMag == True:
            self.mainWin.MagnifyPushButton.setText("Turn On Magnifying Glass")
            self.enableQuadMag = False
            return

    def keyPressed(self, event):
        if event.key() == 16777248:
            self.zoom = "-"
        print "Key Press"

    def keyReleased(self, event):
        if event.key() == 16777248:
            self.zoom = "+"
        print "Key Released"

    def searchPB(self):
        x = self.xedit2.text()
        y = self.yedit2.text()
        itemlist = self.compositeview1.items() + self.compositeview2.items()\
                        + self.compositeview3.items()\
                        + self.compositeview4.items()
        if x == '' or y == '':
            pass
        else:
            for item in itemlist:
                if str(item.__class__.__name__) == "QuadView":
                    try:
                        item.searchExecuted(x, y)
                    except:
                        print "Invalid Type"
                        break
        print "Search Pressed"
